# Learn Data Quality with Great Expectations

A compact guide to run the example project locally. This repository demonstrates using PostgreSQL, generated sample data, and Great Expectations validations.

Quick Start (copy & paste)

```bash
git clone https://github.com/trijuhari/learn-data-quality-using-great-expectations.git
cd learn-data-quality-using-great-expectations
chmod +x scripts/*.sh
./scripts/setup.sh
```

Cleanup

```bash
./scripts/clean.sh
```

If you prefer step-by-step (manual)

Start only the database:

```bash
docker run -d --name pg_local -p 5432:5432 \
  -e POSTGRES_USER=sde -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=data_quality \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:12.2
```

Generate data and load schema:

```bash
python3 scripts/generate_data.py
cat sql/setup_db.sql sql/seed_data.sql | docker exec -i pg_local psql -U sde -d data_quality
```

Run the Great Expectations example:

```bash
python3 src/examples/simple_ge_example.py
```

Database credentials (used by scripts)

- User: `sde`
- Password: `password`
- Database: `data_quality`
- Port: `5432`

Troubleshooting

- If you see "Connection refused", wait a few seconds and re-run `./scripts/setup.sh` (Postgres may still be starting).
- If port `5432` is in use, stop the conflicting container (`docker ps` then `docker stop <container>`).
- To reset the environment: `./scripts/clean.sh` then `./scripts/setup.sh`.

Notes

- The generator writes seeds to `sql/seed_data.sql` (regenerated by `scripts/generate_data.py`).
- `./scripts/setup.sh` will use `docker compose` if available, otherwise it falls back to `docker run`.

License

MIT — use for learning.
# Learn Data Quality with Great Expectations

A minimal guide: clone the repo and run one script to see data validation using Great Expectations.

## Quick start (copy & paste)

```bash
git clone https://github.com/trijuhari/learn-data-quality-using-great-expectations.git
cd learn-data-quality-using-great-expectations
chmod +x scripts/*.sh
./scripts/setup.sh
```

To clean up:

```bash
./scripts/clean.sh
```

## What the setup does

- Starts a PostgreSQL container (`pg_local`) (uses `docker compose` if available, otherwise `docker run`)
- Generates sample data and loads schema
- Installs Python dependencies and runs `src/examples/simple_ge_example.py`

## Manual steps (if needed)

Start DB only:

```bash
docker run -d --name pg_local -p 5432:5432 \
  -e POSTGRES_USER=sde -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=data_quality \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:12.2
```

Load data:

```bash
python3 scripts/generate_data.py
cat sql/setup_db.sql sql/seed_data.sql | docker exec -i pg_local psql -U sde -d data_quality
```

Run validation:

```bash
python3 src/examples/simple_ge_example.py
```

## Database credentials

User: `sde`  Password: `password`  DB: `data_quality`  Port: `5432`

## Troubleshooting

- If you see "Connection refused": wait a few seconds and retry `./scripts/setup.sh` or run `sleep 10` before validation.
- If port 5432 is in use: stop the conflicting container (`docker ps` then `docker stop <container>`).
- To reset: `./scripts/clean.sh` then `./scripts/setup.sh`.

---
MIT — use for learning.
# Learn Data Quality with Great Expectations

A minimal, clean guide to clone and run the project locally.

## Quick Start (copy & paste)

```bash
# 1) Clone
git clone https://github.com/trijuhari/learn-data-quality-using-great-expectations.git
cd learn-data-quality-using-great-expectations

# 2) Make helper scripts executable (first time only)
chmod +x scripts/*.sh

# 3) Run automated setup (starts DB, loads data, installs deps, runs validation)
./scripts/setup.sh
```

If you need to clean up afterwards:

```bash
./scripts/clean.sh
```

## What the scripts do

- Start a PostgreSQL container (`pg_local`) using `docker compose` (if available) or `docker run` fallback
- Generate 1000 sample rows and load schema + data
- Install Python dependencies and run the example Great Expectations validation

## Manual commands (if you prefer step-by-step)

Start DB only (manual):
```bash
docker run -d --name pg_local -p 5432:5432 \
  -e POSTGRES_USER=sde -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=data_quality \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:12.2
```

Generate fresh data & load schema:
```bash
python3 scripts/generate_data.py
cat sql/setup_db.sql sql/seed_data.sql | docker exec -i pg_local psql -U sde -d data_quality
```

Run validation:
```bash
python3 src/examples/simple_ge_example.py
```

## Database credentials

```
User:     sde
Password: password
Database: data_quality
Host:     localhost
Port:     5432
```

## Troubleshooting

- If you get "Connection refused", wait a few seconds and re-run `./scripts/setup.sh` or run `sleep 10` then retry the validation.
- If port 5432 is in use, stop any existing container using that port: `docker ps` then `docker stop <container>`.
- To reset completely: `./scripts/clean.sh` and then `./scripts/setup.sh`.

## License

MIT — use this for learning.
# Learn Data Quality with Great Expectations

A simple guide to learning data quality validation using Great Expectations, PostgreSQL, and Docker.


```bash
# Start database
docker run -d --name pg_local -p 5432:5432 \
  -e POSTGRES_USER=sde -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=data_quality \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:12.2

sleep 5

# Setup data
python3 scripts/generate_data.py
cat sql/setup_db.sql sql/seed_data.sql | docker exec -i pg_local psql -U sde -d data_quality

# Run validation
pip install -r requirements.txt
python3 src/examples/simple_ge_example.py
```

## What is this?

- **PostgreSQL Database** - Runs in Docker
- **1000 Sample Rows** - Auto-generated test data
- **Great Expectations** - Data quality validation framework
- **Simple Examples** - Ready-to-run validation script

## What You Need

- Docker ([Install](https://docs.docker.com/get-docker/))
- Python 3.8+ ([Install](https://www.python.org/downloads/))
- 2GB free disk space

## Project Structure

```
scripts/
  ├── generate_data.py      # Create sample data
  └── init_gx.py            # Initialize Great Expectations
sql/
  ├── setup_db.sql          # Create database schema
  └── seed_data.sql         # Insert sample data
src/examples/
  └── simple_ge_example.py  # Run this to validate data
gx/                         # Great Expectations config
docker-compose.yml          # Docker setup
requirements.txt            # Python packages
README.md                   # This file
```

## Main Commands

### Start the database
```bash
docker run -d --name pg_local -p 5432:5432 \
  -e POSTGRES_USER=sde -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=data_quality \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:12.2
```

### Generate fresh data
```bash
python3 scripts/generate_data.py
cat sql/setup_db.sql sql/seed_data.sql | docker exec -i pg_local psql -U sde -d data_quality
```

### Run data validation
```bash
python3 src/examples/simple_ge_example.py
```

### Stop everything
```bash
docker stop pg_local
docker rm pg_local
docker volume rm postgres_data
```

## Database Info

```
User:     sde
Password: password
Database: data_quality
Host:     localhost
Port:     5432
```

## Common Issues

### "Connection refused" error?
Wait longer for PostgreSQL to start:
```bash
sleep 10
python3 src/examples/simple_ge_example.py
```

### Port 5432 already in use?
```bash
docker stop pg_local
docker rm pg_local
```

### Need to reset?
```bash
docker stop pg_local
docker rm pg_local
docker volume rm postgres_data
# Then run Quick Start again
```

### Check if database is running?
```bash
docker ps
```

### See database logs?
```bash
docker logs pg_local
```

## What is Great Expectations?

Great Expectations helps you:
- ✅ Check data quality automatically
- ✅ Validate row counts and data types
- ✅ Catch data issues early
- ✅ Document data characteristics
- ✅ Generate quality reports

## Example Output

When you run the validation, you'll see:

```
Validation Success: True
------------------------------
Expectation: expect_table_row_count_to_equal    | Success: True
Expectation: expect_column_values_to_not_be_null | Success: True
Expectation: expect_column_values_to_be_in_set   | Success: True
```

## Learn More

- [Great Expectations](https://docs.greatexpectations.io/)
- [PostgreSQL](https://www.postgresql.org/docs/)
- [Docker](https://docs.docker.com/)

## License

MIT - Use this for learning!
